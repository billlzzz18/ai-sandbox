### **AGENTS.md (ฉบับร่างภาษาไทย)**

#### **สรุปงานที่ทำไปแล้ว**

Repository นี้ถูกสร้างขึ้นเพื่อรองรับเฟรมเวิร์กเอเจนต์ที่ขับเคลื่อนด้วยคอนฟิกและเป็นโมดูล โดยมีส่วนสำคัญที่ทำสำเร็จแล้วดังนี้:

1.  **สถาปัตยกรรม "ห้าเสาหลัก" (Five Pillars):** โครงสร้างโปรเจกต์ถูกแบ่งออกเป็นไดเรกทอรี `/role`, `/rule`, `/tool`, `/template`, และ `/prompt` เพื่อแบ่งหน้าที่อย่างชัดเจน
2.  **Core Engine ภาษา Python (`app.py`):** ได้สร้าง Engine หลักที่มีขนาดเล็กและไม่ขึ้นกับ dependency ภายนอก สามารถโหลดคอนฟิกของเอเจนต์, เครื่องมือ, พรอมต์, และกฎเกณฑ์ต่างๆ ได้แบบไดนามิก และยังรองรับขั้นตอนการปรับปรุงพรอมต์ (Prompt Improver) ก่อนการทำงาน
3.  **วางโครงสร้างเอเจนต์และเครื่องมือ:** ได้กำหนดนิยามของเอเจนต์หลักและเอเจนต์เสริมทั้งหมด (`coder`, `planner`, `reporter`, `tutor`, `prompt-improver`) เรียบร้อยแล้ว เครื่องมือที่จำเป็นทั้งหมดได้ถูกนิยามเป็นไฟล์ `.yaml` และมีฟังก์ชันตัวแทน (stub) อยู่ในไดเรกทอรี `/tools/`
4.  **การตรวจสอบความถูกต้องและเอกสาร:** มีสคริปต์ `validate.py` เพื่อใช้ตรวจสอบว่าไฟล์คอนฟิกทั้งหมดถูกต้องตามสกีมาที่กำหนดไว้ และไฟล์ `README.md` ได้รับการอัปเดตเพื่ออธิบายสถาปัตยกรรมและวิธีการใช้งานอย่างละเอียด

#### **ขั้นตอนต่อไป**

สถานะปัจจุบันของโปรเจกต์คือ "โครงสร้าง" (Scaffold) ที่สมบูรณ์ ทุกส่วนของสถาปัตยกรรมถูกเชื่อมต่อกันแล้ว แต่ส่วนตรรกะหลักยังเป็นแค่ตัวแทน (placeholder) ขั้นตอนการพัฒนาที่สำคัญต่อไปคือ:

1.  **พัฒนาฟังก์ชันการทำงานจริงของเครื่องมือ:** สิ่งที่ต้องทำเป็นอันดับแรกคือการแทนที่ฟังก์ชัน "stub" ในไดเรกทอรี `/tools/` (`core_logic.py`, `api_stubs.py`) ด้วยโค้ดที่ทำงานได้จริง ตัวอย่างเช่น เครื่องมือ `write_python` ควรถูกเชื่อมต่อกับบริการหรือโมเดลที่สามารถสร้างโค้ด Python ได้จริง
2.  **พัฒนา Loop การโต้ตอบกับ LLM หลัก:** Engine `app.py` จำเป็นต้องมี Loop การทำงานหลัก ซึ่งประกอบด้วย:
    *   การเชื่อมต่อกับ Language Model (LLM)
    *   การส่งบริบททั้งหมดของเอเจนต์ (persona, rules, refined prompt) ไปยัง LLM
    *   การประมวลผลผลลัพธ์จาก LLM เพื่อแสดงต่อผู้ใช้ หรือเพื่อเรียกใช้เครื่องมือผ่านเมธอด `agent.run_tool()`
3.  **กำหนดและสร้างเอเจนต์ชุดใหม่:** สร้างไฟล์ `role`, `prompt`, และ `rule` สำหรับเอเจนต์ชุดถัดไปที่ได้มีการร้องขอ (`novel-writer`, `table-data-agent`, `song-writer`, `seo-agent`, etc.) ซึ่งเป็นส่วนหนึ่งของ "Phase C"

#### **การเพิ่มเอเจนต์ Gemini CLI (Phase B+)**
ได้เพิ่มการสนับสนุนสำหรับ Gemini CLI เป็นเอเจนต์ใหม่ในเฟรมเวิร์ก:

1. **ติดตั้ง Gemini CLI:** ติดตั้ง `@google/gemini-cli@latest` ผ่าน npm
2. **ตั้งค่าตัวแปรสภาพแวดล้อม:** `GEMINI_API_KEY` และ `GOOGLE_CLOUD_PROJECT`
3. **สร้างโครงสร้างเอเจนต์:**
   - `role/gemini-agent/role.yaml` - นิยามบทบาทและเครื่องมือของ Gemini Agent
   - `prompt/coding/gemini_agent_prompt.yaml` - พรอมต์สำหรับ Gemini Agent
   - `rule/gemini/gemini_rules.md` - กฎเกณฑ์เฉพาะสำหรับ Gemini CLI
4. **พัฒนาเครื่องมือจริง:** แทนที่ฟังก์ชัน stub ใน `tools/core_logic.py` ด้วยการเรียกใช้ Gemini CLI จริง
5. **การทำงาน:** Gemini Agent สามารถสร้างโค้ด Python/TypeScript, วิเคราะห์โค้ด, ค้นหาเว็บ, และทำงานอื่นๆ ผ่าน Gemini CLI
